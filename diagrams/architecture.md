## Architecture

```
┌─────────────────────────────────────────────────────────────────────┐
│                         Docker Compose                              │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌──────────────────────────────────────────────────────────────┐   │
│  │                      qr-c container                          │   │
│  │                                                              │   │
│  │   MQTT (olno/dev_cmd)                                        │   │
│  │         │                                                    │   │
│  │         ▼                                                    │   │
│  │   ┌───────────┐    /dev/ttyS2    ┌─────────┐   /dev/ttyS1    │   │
│  │   │ process.py│─────────────────►│  socat  │◄─────────────── │   │
│  │   └───────────┘                  └─────────┘                 │   │
│  │         │                             │                      │   │
│  │         │                             ▼                      │   │
│  │         │                      ┌───────────┐                 │   │
│  │         │                      │ qr_serial │ (C program)     │   │
│  │         │                      └───────────┘                 │   │
│  │         │                             │                      │   │
│  │         │    /dev/ttyQR2        ┌─────────┐  /dev/ttyQR1     │   │
│  │         └──────────────────────►│  socat  │◄─────────────────│   │
│  │                                 └─────────┘   (QR scanner)   │   │
│  │                                                              │   │
│  │   stdout (JSON) ──────► process.py ──────► MQTT (olno/events)│   │
│  └──────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  ┌──────────────────────────────────────────────────────────────┐   │
│  │                    gateway container                         │   │
│  │                                                              │   │
│  │   Subscribes: olno/events, olno/commands                     │   │
│  │   Publishes:  olno/dev_cmd (forwards commands)               │   │
│  └──────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```
